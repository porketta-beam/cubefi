# RAG Lab Scripts

ê°œì¸ í”„ë¡œì íŠ¸ ìˆ˜ì¤€ìœ¼ë¡œ ë‹¨ìˆœí•œ êµ¬ì¡°ë¡œ ì‘ì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ ë° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë“¤ì…ë‹ˆë‹¤.

## ğŸ“ Scripts

### 1. `backfill_default_config.py`
ë ˆê±°ì‹œ ë¬¸ì„œì— `config.json`ê³¼ `metadata.json` íŒŒì¼ì„ ìë™ ìƒì„±í•˜ëŠ” ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸

**ì‚¬ìš©ë²•:**
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ëŒ€ìƒ ë¬¸ì„œ í™•ì¸ (ì‹¤ì œ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ)
python scripts/backfill_default_config.py --dry-run

# ì‹¤ì œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
python scripts/backfill_default_config.py

# ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ ì§€ì •
python scripts/backfill_default_config.py --raw-data-root /path/to/raw_data
```

**ê¸°ëŠ¥:**
- ë ˆê±°ì‹œ ë¬¸ì„œ ë°œê²¬ (config.json ë˜ëŠ” metadata.jsonì´ ì—†ëŠ” ë¬¸ì„œ)
- ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ config.json ìƒì„±
- íŒŒì¼ ì •ë³´ ê¸°ë°˜ìœ¼ë¡œ metadata.json ìƒì„±
- ì—ëŸ¬ ë°œìƒ ì‹œ ìƒì„¸ ë¡œê·¸ ì¶œë ¥

### 2. `run_tests.py`
ì „ì²´ ì‹œìŠ¤í…œì— ëŒ€í•œ í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰

**ì‚¬ìš©ë²•:**
```bash
python scripts/run_tests.py
```

**í…ŒìŠ¤íŠ¸ í•­ëª©:**
- ì„œë²„ ì„í¬íŠ¸ í…ŒìŠ¤íŠ¸ (ê¸°ë³¸ ì˜ì¡´ì„± í™•ì¸)
- ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸
- API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ (pytest ì„¤ì¹˜ëœ ê²½ìš°)

### 3. `performance_test.py`
API ì—”ë“œí¬ì¸íŠ¸ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

**ì‚¬ìš©ë²•:**
```bash
# ê¸°ë³¸ í…ŒìŠ¤íŠ¸ (5ê°œ íŒŒì¼)
python scripts/performance_test.py

# íŒŒì¼ ê°œìˆ˜ ì§€ì •
python scripts/performance_test.py --files 10

# ê²°ê³¼ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥
python scripts/performance_test.py --files 5 --output results.json
```

**í…ŒìŠ¤íŠ¸ í•­ëª©:**
- íŒŒì¼ ì—…ë¡œë“œ ì„±ëŠ¥
- ì„¤ì • ì¡°íšŒ/ì—…ë°ì´íŠ¸ ì„±ëŠ¥
- ë™ê¸°í™” ì„±ëŠ¥ (ë‹¨ì¼/ì „ì²´)
- ë¬¸ì„œ ì‚­ì œ ì„±ëŠ¥
- ì„±ëŠ¥ í‰ê°€ ë° ê¶Œì¥ì‚¬í•­

## ğŸ“‹ Tests ë””ë ‰í† ë¦¬

### `tests/test_api_endpoints.py`
ì¢…í•©ì ì¸ API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸

**í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤:**
- `TestAPIEndpoints`: FastAPI í†µí•© í…ŒìŠ¤íŠ¸
- `TestDocumentLifecycleService`: ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

**pytestë¡œ ì‹¤í–‰:**
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest tests/test_api_endpoints.py -v

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
pytest tests/test_api_endpoints.py::TestAPIEndpoints::test_upload_pdf_success -v

# ìƒì„¸í•œ ì¶œë ¥
pytest tests/test_api_endpoints.py -v --tb=long
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python scripts/run_tests.py
```

### 2. ë ˆê±°ì‹œ ë¬¸ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ëŒ€ìƒ í™•ì¸
python scripts/backfill_default_config.py --dry-run

# ì‹¤ì œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
python scripts/backfill_default_config.py
```

### 3. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
```bash
# ê°„ë‹¨í•œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
python scripts/performance_test.py --files 3
```

## ğŸ“Š ì„±ëŠ¥ ê¸°ì¤€

### ì—…ë¡œë“œ ì„±ëŠ¥
- **ëª©í‘œ**: í‰ê·  < 2ì´ˆ (10MB ì´í•˜ íŒŒì¼)
- **í—ˆìš©**: í‰ê·  < 5ì´ˆ

### ì„¤ì • API ì„±ëŠ¥
- **GET**: < 100ms
- **PUT**: < 500ms

### ë™ê¸°í™” ì„±ëŠ¥
- **ë‹¨ì¼ ë¬¸ì„œ**: < 3ì´ˆ
- **ì „ì²´ ë™ê¸°í™”**: ë¬¸ì„œë‹¹ < 2ì´ˆ

## ğŸ”§ ì˜ì¡´ì„±

### í•„ìˆ˜ ì˜ì¡´ì„±
- Python 3.8+
- FastAPI
- ì„œë²„ì˜ ëª¨ë“  ì˜ì¡´ì„± (requirements.txt)

### ì„ íƒì  ì˜ì¡´ì„±
```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì„ ìœ„í•´
pip install pytest pytest-asyncio

# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥ì„ ìœ„í•´ (ì´ë¯¸ í¬í•¨ë¨)
# json ëª¨ë“ˆì€ Python ê¸°ë³¸ ì œê³µ
```

## ğŸ› ë¬¸ì œ í•´ê²°

### ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨
1. `raw_data` ë””ë ‰í† ë¦¬ ê²½ë¡œ í™•ì¸
2. ê¶Œí•œ ë¬¸ì œ í™•ì¸ (ì“°ê¸° ê¶Œí•œ í•„ìš”)
3. ë””ìŠ¤í¬ ê³µê°„ í™•ì¸

### í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨
1. ì„œë²„ ì˜ì¡´ì„± ì„¤ì¹˜ í™•ì¸: `pip install -r requirements.txt`
2. í™˜ê²½ë³€ìˆ˜ ì„¤ì • í™•ì¸
3. í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ ë””ë ‰í† ë¦¬ ìƒì„± ê¶Œí•œ í™•ì¸

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë¬¸ì œ
1. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ì§€ ì•Šì•„ì•¼ í•¨ (TestClient ì‚¬ìš©)
2. ì¶©ë¶„í•œ ë©”ëª¨ë¦¬ì™€ ë””ìŠ¤í¬ ê³µê°„ í™•ì¸
3. ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ

## ğŸ“ ë¡œê·¸ ë° ë””ë²„ê¹…

ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ëŠ” ìƒì„¸í•œ ë¡œê·¸ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:
- âœ“ ì„±ê³µ (ë…¹ìƒ‰)
- âœ— ì‹¤íŒ¨ (ë¹¨ê°„ìƒ‰)
- ê²½ê³  ë° ì •ë³´ ë©”ì‹œì§€

ì—ëŸ¬ ë°œìƒ ì‹œ ìƒì„¸í•œ tracebackê³¼ í•¨ê»˜ ë¬¸ì œ í•´ê²° ë°©ë²•ì„ ì œì‹œí•©ë‹ˆë‹¤.